<div class="container">
    <div class="titolo" style="text-align: center;margin-top: 30px; font-size: 30px;">
        <p><strong>Assegnazione dei pesi ai criteri in relazione alle esigenze dell'utente</strong>
    </div>

    <div class="card my-5">
        <div class="card-header" style="text-align: center; font-size: 20px;">
            <p><strong>SELEZIONA MATRICE SCOMPOSTA</strong></p>
        </div>
        <div class="card-body">
            <ul class="list-group">

                <!--
                <li class="list-group-item">     
                    <tr *ngFor="let row of matrix; index as r">
                        <td *ngFor="let columns of row; index as c">
                            <tr *ngIf="r === 1">
                                <td *ngIf="c === 0">
                                    prova  
                                    <input type="range" class="form-range" min="0" max="0.5" step=".01" id="customRange" list="arrayComparazioneInteri" [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c) ">
                                    <datalist id="arrayComparazioneInteri">
                                        <option value="eval(1/9).toFixed(2)"></option> 
                                        <option value="0.2"></option>  
                                        <option value="0.25"></option>
                                        <option value="0.5"></option>

                                    </datalist>    
                                      {{oggetto[r][c]}}
                                    rispetto a prova
                                </td>
                            </tr>
                        </td>
                    </tr> 
                </li>PROVAAAAAA-->


                <li class="list-group-item">     
                    <tr *ngFor="let row of matrix; index as r">
                        <td *ngFor="let columns of row; index as c">
                            <tr *ngIf="r === 1">
                                <td *ngIf="c === 0">
                                    Efficacia 
                                    <select (change)="onChangeScelta()" [(ngModel)]="sceltaId">
                                        <option [ngValue]="a.id" *ngFor="let a of arrayScelta">
                                            {{a.char}}
                                        </option>          
                                    </select>
                                     modicità di costo. Scegli un valore da 1 a 8:
                                    <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                                        <ng-container *ngIf="sceltaId">
                                            <option [ngValue]="b.num" *ngFor="let b of comparazioneListDrop">
                                                {{b.char}}
                                            </option>
                                        </ng-container>          
                                    </select> 
                                </td>
                            </tr>
                        </td>
                    </tr> 
                </li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 2">
                <td *ngIf="c === 0">
                    Compatibilità visiva
                                    <select (change)="onChangeScelta()" [(ngModel)]="sceltaId">
                                        <option [ngValue]="a.id" *ngFor="let a of arrayScelta">
                                            {{a.char}}
                                        </option>          
                                    </select>
                                     modicità di costo
                                    <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                                        <ng-container *ngIf="sceltaId">
                                            <option *ngFor="let b of comparazioneListDrop" [ngValue]="b.num">
                                                {{b.char}}
                                            </option>
                                        </ng-container>          
                                    </select> 
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 2">
                <td *ngIf="c === 1"> 
                    Compatibilità visiva 
                                    <select (change)="onChangeScelta()" [(ngModel)]="sceltaId">
                                        <option [ngValue]="a.id" *ngFor="let a of arrayScelta">
                                            {{a.char}}
                                        </option>          
                                    </select>
                                     efficacia
                                    <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                                        <ng-container *ngIf="sceltaId">
                                            <option *ngFor="let b of comparazioneListDrop" [ngValue]="b.num">
                                                {{b.char}}
                                            </option>
                                        </ng-container>          
                                    </select> 
                    
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 3">
                <td *ngIf="c === 0">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 3">
                <td *ngIf="c === 1">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 3">
                <td *ngIf="c === 2">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 4">
                <td *ngIf="c === 0">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 4">
                <td *ngIf="c === 1">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 4">
                <td *ngIf="c === 2">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">     
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 4">
                <td *ngIf="c === 3">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 5">
                <td *ngIf="c === 0">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 5">
                <td *ngIf="c === 1">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 5">
                <td *ngIf="c === 2">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 5">
                <td *ngIf="c === 3">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr> 
</li>

<li class="list-group-item">    
    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let columns of row; index as c">
            <tr *ngIf="r === 5">
                <td *ngIf="c === 4">   
                     <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                        <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                            {{a.char}}
                        </option>          
                    </select>
                </td>
            </tr>
        </td>
    </tr>
</li>
</ul> 
          
        </div>
    </div>





    <tr *ngFor="let row of matrix; index as r">
        <td *ngFor="let column of row; index as c"> 
            
            <select [(ngModel)]="oggetto[r][c]" (change)="onSelectChange(r,c)">
                <option [ngValue]="a.num" *ngFor="let a of arrayComparazione">
                {{a.char}}
                </option>
            
            </select>
        </td>
    </tr>

 
                        

    <div [ngClass]="{'crGood': cr < 0.1, 'crBad': cr >= 0.1}"
        style="margin-bottom: 30px; margin-top: 40px; text-align: center;">
        <div style="color: white">
            <strong>Finché il colore non diventa verde (CR < 0.10), non sarà possibile utilizzare i pesi.</strong>
        </div>
        <strong> VALORE CR: {{cr | number: '1.2-2'}}</strong>
    </div>
    <div class="pulsante">
        <button *ngIf="cr < 0.1" class="btn btn-info" style="align-content: center;" (click)="trasferisciPonderazione()">
            Premi per ottenere i pesi
        </button>
        <!---->
    </div>


<label></label>

<div class="container tabelle">

    <!-- Colonne per tabelle -->
    <div class="overflow-auto">
    <div class="row">
        <div class="col-lg-4">
            <details>
                <summary><b>Matrice Normalizzata</b></summary>
                <div class="Second_table" style="float: left; margin-right: 30px;">
                        <table class="table table-bordered">
                            <thead class="thead-dark">
                                <th>
                                    MATRICE NORMALIZZATA
                                </th>
                                <th>
                                </th>
                                <th>
                                </th>
                                <th>
                                </th>
                                <th>
                                </th>
                                <th>
                                </th>
                                <th>
                                    PONDERAZIONE (VETTORE P)
                                </th>
                            </thead>
                            <tr *ngFor="let row of matrix; index as r">
                                <td *ngFor="let column of row; index as c">
                                    <div>
                                        {{matriceNormalizzata[r][c] | number: '1.2-2' }}
                                    </div>
                                </td>
                                <td>
                                    {{ponderazione[r] | number: '1.2-2'}}
                                    <!--{{ponderazione[r] * 100 | number: '1.0-0'}}%-->
                                </td>
                            </tr>
                        </table>
                    </div>
            </details>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
            <!-- Colonna vuota -->
        </div><!-- /.col-lg-4 -->
    
        <div class="col-lg-4">
            <table class="table table-bordered" style="text-align: center; width: 30px; margin-top: 25px;">
                <thead class="thead-dark">
                    <th>
                        TABELLA PERCENTUALI
                    </th>
                </thead>
                <tr *ngFor="let row of matrix; index as r">
                    <td>
                        {{ponderazione[r]*100 | number: '1.0-0'}}%
                        <!--{{ponderazione[r] * 100 | number: '1.0-0'}}%-->
                    </td>
                </tr>
            </table>
        </div><!-- /.col-lg-4 -->
    </div><!-- /.row -->
</div>
</div><!-- /.container -->
</div>
